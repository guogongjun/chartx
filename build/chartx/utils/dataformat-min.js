define("chartx/utils/dataformat",[],function(){return function(a,b){function c(a){for(var b={},c=e.data,d=0,f=c.length;f>d;d++)c[d]&&(b[c[d].field]=c[d].data[a]);return b}function d(a){var b;return _.each(e.data,function(c){c.field==a&&(b=c)}),b.data}var e={org:[],data:[],yAxis:{field:null,org:[]},xAxis:{field:[],org:[]},zAxis:{field:[],org:[]},getRowData:c,getFieldData:d},f=function(a){for(var b=[],c=[],d=0,e=0,f=a.length;f>e;e++){var g=a[e];if(0==e){for(var h in g)c.push(h);b.push(c),d=c.length}for(var i=[],j=0;d>j;j++)i.push(g[c[j]]);b.push(i)}return b};if(!a||0==a.length)return e;a.length>0&&!_.isArray(a[0])&&(a=f(a));var g=a;e.org=g;var h=g[0]?g[0]:[];b?(b.yAxis&&(e.yAxis.field=b.yAxis.field),b.xAxis&&(e.xAxis.field=b.xAxis.field),b.zAxis&&(e.zAxis.field=b.zAxis.field)):(this.yAxis&&(e.yAxis.field=this.yAxis.field),this.xAxis&&(e.xAxis.field=this.xAxis.field),this.zAxis&&(e.zAxis.field=this.zAxis.field));for(var i=[],j=0,k=h.length;k>j;j++){var l={};l.field=h[j],l.index=j,l.data=[],i.push(l)}e.data=i;var m=function(a,b,c){for(var d=b,e=[],f=0,g=a.length;g>f;f++){var h=!1;if(_.isArray(a[f]))e.push(m(a[f],b,c));else{for(var i=0,j=d.length;j>i;i++)if(a[f]==d[i].field){h=!0,e.push(d[i].data);break}h||(a.splice(f,1),f--,g--)}}return e},n=e.xAxis.field;n&&""!=n&&(!_.isArray(n)||0!=n.length&&_.find(i,function(a){return _.indexOf(n,a.field)>=0?!0:!1}))?_.isString(n)&&(n=[n]):n=e.xAxis.field=[i[0].field];var o=e.yAxis.field;""==o||_.isArray(o)&&0==o.length?o=[]:o?_.isString(o)&&(o=[o]):o=_.difference(h,n),e.yAxis.field=o;for(var p=_.flatten(e.yAxis.field),j=1,k=g.length;k>j;j++)for(var q=0,r=g[j].length;r>q;q++){var s=g[j][q];s&&_.indexOf(p,g[0][q])>=0&&(s=isNaN(Number(s))?s:Number(s)),i[q].data.push(s)}e.xAxis.org=m(n,i),e.yAxis.org=m(o,i,"yAxis");var t=e.zAxis.field;_.isString(t)&&(t=[t]),e.zAxis.field=t;var u=_.flatten(e.zAxis.field);return u.length>0&&(e.zAxis.org=m(t,i)),e}});