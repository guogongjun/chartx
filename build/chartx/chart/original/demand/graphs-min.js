define("chartx/chart/original/demand/graphs",["canvax/index","chartx/utils/simple-data-format","canvax/shape/Circle","chartx/chart/original/demand/group","canvax/shape/Sector"],function(a,b,c,d,e){var f=function(a){this.sprite=null,this.w=0,this.h=0,this.center={name:"center",r:30,fillStyle:"#70629e",fontSize:15,fontColor:"#ffffff",margin:20},this.back={fillStyle:null,strokeStyle:null,lineWidth:1},this.groups={field:"group",data:[]},this._groups=[],this.group={},this.coordinate=a.coordinate,this.dataFrame=a.dataFrame,_.deepExtend(this,a.options),this.init()};return f.prototype={init:function(){this.sprite=new a.Display.Sprite({id:"graphsEl"}),this.dataHandle(),window.chart=this},draw:function(){var b=this,e=this.coordinate.center.x,f=this.coordinate.center.y,g=this.center.r+this.center.margin;_.each(this.groups.data,function(a,c){var e=b.coordinate.maxR-b.center.margin,f=parseInt(g+e*((a.org.length-1)/(b.dataFrame.org.length-1)),10),h=new d({data:a,ind:c,coordinate:b.coordinate,options:_.extend({rRange:{start:g,to:f}},b.group)});g=h.rRange.to,b._groups.push(h)});for(var h=b._groups.length-1;h>=0;h--)b.sprite.addChild(new c({context:{x:b.coordinate.center.x,y:b.coordinate.center.y,r:b._groups[h].rRange.to,lineWidth:b._getBackProp(b.back.lineWidth,h),strokeStyle:b._getBackProp(b.back.strokeStyle,h),fillStyle:b._getBackProp(b.back.fillStyle,h),globalAlpha:1}}));_.each(b._groups,function(a){b.sprite.addChild(a.sprite)}),this._center=new c({context:{x:e,y:f,fillStyle:this.center.fillStyle,r:this.center.r}}),this._label=new a.Display.Text(this.center.name,{context:{x:e,y:f,fontSize:this.center.fontSize,textAlign:"center",textBaseline:"middle",fillStyle:this.center.fontColor}}),this.sprite.addChild(this._center),this.sprite.addChild(this._label)},dataHandle:function(){var a=_.indexOf(this.dataFrame.fields,this.groups.field);if(a>=0){var c=this.dataFrame.org[0],d={};_.each(this.dataFrame.org,function(b,e){e&&(d[b[a]]||(d[b[a]]=[_.clone(c)]),d[b[a]].push(b))});for(var e in d)this.groups.data.push(b(d[e]))}else this.groups.data.push(this.dataFrame)},_getBackProp:function(a,b){var c=b,d=null;return _.isFunction(a)&&(d=a.apply(this,[{groupInd:c,groups:this._groups}])),(_.isString(a)||_.isNumber(a))&&(d=a),_.isArray(a)&&(d=a[b]),d},_coordinateTest:function(){var a=230,b=this.coordinate.getRadiansAtR(a),c=this;_.each(b,function(b){var d=new e({context:{x:c.coordinate.center.x,y:c.coordinate.center.y,r:a,startAngle:180*b[0].radian/Math.PI,endAngle:180*b[1].radian/Math.PI,strokeStyle:"#ccc",lineWidth:1}});c.sprite.addChild(d)})}},f});